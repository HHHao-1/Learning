# CharSequence

> String、StringBuffer、StringBuilder都实现了这个接口

| 方法                                         | 描述                             |
| -------------------------------------------- | -------------------------------- |
| char charAt(int index)                       | 返回指定索引处的字符             |
| default IntStream chars()                    | 返回无符号char的int流            |
| default IntStream codePoints()               | 返回此字符序列代码点的int流      |
| int length()                                 | 返回该字符序列的长度             |
| CharSequence subSequence(int start, int end) | 返回一个新的charsequence子序列   |
| String toString()                            | 返回一个包含此序列中字符的字符串 |

**补充：**

codepoint代码点：

unicode的范围从000000 - 10FFFF，char的范围只能是在\u0000到\uffff，也就是标准的 2 字节形式通常称作 UCS-2，在Java中，char类型用UTF-16编码描述一个代码单元，但unicode大于\uffff的部分如何用char表示呢，用两个char来表示，就是代码点。

UTF-16是16bit最多编码65536，从这65536个编码里，拿出2048个，规定他们是「Surrogates」，让他们两个为一组，来代表编号大于65536的那些字符。

# String

## 创建字符串

> String s1="imooc";                     创建一个字符串对象imooc,名为s1
>
> String s2=new String();               创建一个空字符串对象，名为2
>
> String s3=new String("imooc");   创建一个字符串对象imooc,名为s3

## 字符串存储

> 1. String底层用char[]存储，是不可变类，值的传入与取出都是深拷贝进行赋值

![image-20201005173831632](https://tva1.sinaimg.cn/large/007S8ZIlgy1gjelfpptuzj30ld04rgmb.jpg)

```java
String str1 = "String 学习";
int i = 2;
Integer[] ints = {1,2};
byte[] arr = str1.getBytes();
for (byte b : arr) {
    System.out.print(b+"  ");
}
System.out.println();
String str2 = new String(arr);
String str3 = new String(arr,"GBK"); //互相转换编码格式要一样,idea默认utf-8
System.out.println(str2);
System.out.println(str3);

str1.chars().forEach(s-> System.out.print(s+"  "));
System.out.println();
str1.codePoints().forEach(s-> System.out.print(s+"  "));
char a =23398;
char b =20064;
System.out.println(a+""+b);

//    汉字负数显示是因为：每个字节用有符号数表示（第一位为符号位），-128到127，汉字每个字节是超过127的 转换为负数
//    83  116  114  105  110  103  32  -27  -83  -90  -28  -71  -96
//    String 学习
//    String 瀛︿範
//    83  116  114  105  110  103  32  23398  20064  
//    83  116  114  105  110  103  32  23398  20064  学习
```

> 2. 在内存中的存储：栈存引用，堆存对象，常量池存常量

![Pasted Graphic 5](https://tva1.sinaimg.cn/large/007S8ZIlgy1gjemhqlnq9j30um0khajh.jpg)

```java
//String对象一旦被创建，则不能修改,是不可变的
//所谓的修改其实是创建了新的对象，原对象所指向的内存空间不变
String s1="imooc";
String s2="hello,"+s1;
//s1不再指向imooc所在的内存空间,而是指向了"hello,imooc"
```

## API

| **属性：**                                                   |
| ------------------------------------------------------------ |
| Comparator\<String> CASE_INSENSITIVE_ORDER                   |
| 返回一个通过compareToIgnoreCase比较的Comparator              |
| **构造方法：**                                               |
| string()                                                     |
| string (byte[]A)                                             |
| String(byte[]A, Charset)                                     |
| String(byte[]A, int offset, int length)                      |
| string (byte[]A, int offset, int length Charset)             |
| String(byte[] bytes, int offset, int length, String charsetName) |
| String(byte[] bytes, String charsetName)                     |
| string (char[]A)                                             |
| String(char[] value, int offset, int count)                  |
| String(int[] codePoints, int offset, int count)              |
| String(String)                                               |
| String(StringBuffer)                                         |
| String(StringBuilder)                                        |

| 方法                                                         | 描述                                                         | 分类 |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- |
| int length()                                                 | 返回此字符串的长度。                                         | 常用 |
| int hashCode()                                               | 返回此字符串的哈希码。                                       |      |
| boolean equals(Object anObject)                              | 将此字符串与指定的对象比较。                                 |      |
| String toString()                                            | 返回此对象本身（它已经是一个字符串！）。                     |      |
| contains(CharSequence chars)                                 | 判断是否包含指定的字符系列。                                 | 判断 |
| isEmpty()                                                    | 判断字符串是否为空。                                         |      |
| int compareTo(Object o)                                      | 把这个字符串和另一个对象比较。                               | 比较 |
| int compareTo(String anotherString)                          | 按字典顺序比较两个字符串。                                   |      |
| int compareToIgnoreCase(String str)                          | 按字典顺序比较两个字符串，不考虑大小写。                     |      |
| boolean equalsIgnoreCase(String anotherString)               | 将此 String 与另一个 String 比较，不考虑大小写。             |      |
| boolean contentEquals(StringBuffer sb)                       | 当且仅当字符串与指定的StringBuffer有相同顺序的字符时候返回真。 | 匹配 |
| boolean matches(String regex)                                | 告知此字符串是否匹配给定的正则表达式。                       |      |
| boolean regionMatches(boolean ignoreCase, int toffset, String other, int ooffset, int len) | 测试两个字符串区域是否相等。                                 | 测试 |
| boolean regionMatches(int toffset, String other, int ooffset, int len) | 测试两个字符串区域是否相等。                                 |      |
| boolean endsWith(String suffix)                              | 测试此字符串是否以指定的后缀结束。                           |      |
| boolean startsWith(String prefix)                            | 测试此字符串是否以指定的前缀开始。                           |      |
| boolean startsWith(String prefix, int toffset)               | 测试此字符串从指定索引开始的子字符串是否以指定前缀开始。     |      |
| static String copyValueOf(char[] data)                       | 返回指定数组中表示该字符序列的 String。                      | 转换 |
| static String copyValueOf(char[] data, int offset, int count) | 返回指定数组中表示该字符序列的 String。                      |      |
| byte[] getBytes()                                            | 使用平台的默认字符集将此 String 编码为 byte 序列，并将结果存储到一个新的 byte 数组中。 |      |
| byte[] getBytes(String charsetName)                          | 使用指定的字符集将此 String 编码为 byte 序列，并将结果存储到一个新的 byte 数组中。 |      |
| void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) | 将字符从此字符串复制到目标字符数组。                         |      |
| char[] toCharArray()                                         | 将此字符串转换为一个新的字符数组。                           |      |
| String toLowerCase()                                         | 使用默认语言环境的规则将此 String 中的所有字符都转换为小写。 |      |
| String toLowerCase(Locale locale)                            | 使用给定 Locale 的规则将此 String 中的所有字符都转换为小写。 |      |
| String toUpperCase()                                         | 使用默认语言环境的规则将此 String 中的所有字符都转换为大写。 |      |
| String toUpperCase(Locale locale)                            | 使用给定 Locale 的规则将此 String 中的所有字符都转换为大写。 |      |
| char charAt(int index)                                       | 返回指定索引处的 char 值。                                   | 索引 |
| int indexOf(int ch)                                          | 返回指定字符在此字符串中第一次出现处的索引。                 |      |
| int indexOf(int ch, int fromIndex)                           | 返回在此字符串中第一次出现指定字符处的索引，从指定的索引开始搜索。 |      |
| int indexOf(String str)                                      | 返回指定子字符串在此字符串中第一次出现处的索引。             |      |
| int indexOf(String str, int fromIndex)                       | 返回指定子字符串在此字符串中第一次出现处的索引，从指定的索引开始。 |      |
| String intern()                                              | 返回字符串对象的规范化表示形式。                             |      |
| int lastIndexOf(int ch)                                      | 返回指定字符在此字符串中最后一次出现处的索引。               |      |
| int lastIndexOf(int ch, int fromIndex)                       | 返回指定字符在此字符串中最后一次出现处的索引，从指定的索引处开始进行反向搜索。 |      |
| int lastIndexOf(String str)                                  | 返回指定子字符串在此字符串中最右边出现处的索引。             |      |
| int lastIndexOf(String str, int fromIndex)                   | 返回指定子字符串在此字符串中最后一次出现处的索引，从指定的索引开始反向搜索。 |      |
| String concat(String str)                                    | 将指定字符串连接到此字符串的结尾。                           | 改变 |
| String replace(char oldChar, char newChar)                   | 返回一个新的字符串，它是通过用 newChar 替换此字符串中出现的所有 oldChar 得到的。 |      |
| String replaceAll(String regex, String replacement)          | 使用给定的 replacement 替换此字符串所有匹配给定的正则表达式的子字符串。 |      |
| String replaceFirst(String regex, String replacement)        | 使用给定的 replacement 替换此字符串匹配给定的正则表达式的第一个子字符串。 |      |
| String[] split(String regex)                                 | 根据给定正则表达式的匹配拆分此字符串。                       |      |
| String[] split(String regex, int limit)                      | 根据匹配给定的正则表达式来拆分此字符串。                     |      |
| CharSequence subSequence(int beginIndex, int endIndex)       | 返回一个新的字符序列，它是此序列的一个子序列。               |      |
| String substring(int beginIndex)                             | 返回一个新的字符串，它是此字符串的一个子字符串。             |      |
| String substring(int beginIndex, int endIndex)               | 返回一个新字符串，它是此字符串的一个子字符串。               |      |
| String trim()                                                | 返回字符串的副本，忽略前导空白和尾部空白。                   |      |
| static String valueOf(primitive data type x)                 | 返回给定data type类型x参数的字符串表示形式。                 |      |

# StringBuffer

# StringBuilder

> - StringBuilder和StringBuffer类的对象是可变的，频繁操作字符串时使用它们
>
> - StringBuilder和StringBuffer二者基本相似
>
> - 区别：
>   - StringBuilder：线程不安全，执行速度快
>   - StringBuffer：线程安全, 执行速度慢

![image-20201005204448960](https://tva1.sinaimg.cn/large/007S8ZIlgy1gjeqtjn1gxj30k3086jry.jpg)

| 构造方法：                                      | 分类 |
| ----------------------------------------------- | ---- |
| StringBuilder()                                 |      |
| StringBuilder (CharSequence)                    |      |
| stringBuilder (int capacity)                    |      |
| stringBuilder(String)                           |      |
| **方法**：                                      |      |
| append (boolean)                                | 追加 |
| append (char)                                   |      |
| append (char[]A)                                |      |
| append (char[]A, int, int)                      |      |
| append (CharSequence)                           |      |
| append (CharSequence, int, int)                 |      |
| append (double)                                 |      |
| append (float)                                  |      |
| append (int)                                    |      |
| append (long)                                   |      |
| append (object)                                 |      |
| append (String)                                 |      |
| append (StringBuffer)                           |      |
| appendCodePoint (int)                           |      |
| capacity()                                      | 容量 |
| ensureCapacity (int)                            |      |
| charAt(int index)                               | 索引 |
| indexOf (String)                                |      |
| indexOf (String, int)                           |      |
| lastIndexOf (String)                            |      |
| lastIndexOf(String, int).                       |      |
| codePointAt(int index)                          |      |
| codePointBefore(int index)                      |      |
| codePointCount (int index, int codePointOffset) |      |
| offsetByCodePoints (int, int)                   |      |
| delete(int start, int end)                      | 删除 |
| deleteCharAt (int)                              |      |
| insert (int, boolean)                           | 插入 |
| insert(int, char)                               |      |
| insert(int, char[]A)                            |      |
| insert(int, char[]A, int, int)                  |      |
| insert(int, CharSequence)                       |      |
| insert(int, CharSequence, int, int)             |      |
| insert(int, double)                             |      |
| insert(int, float)                              |      |
| insert(int, int)                                |      |
| insert(int, long)                               |      |
| insert(int, object)                             |      |
| insert(int, string)                             |      |
| getChars(int, int, char[]A, int)                | 复制 |
| reverse()                                       | 改变 |
| trimTosize()                                    |      |
| replace(int, int, string)                       |      |
| setCharAt(int, char)                            |      |
| setLength(int）                                 |      |
| subSequence(int, int)                           | 子串 |
| substring (int)                                 |      |
| substring(int, int)                             |      |
| tostring()                                      | 常用 |
| length ()                                       |      |